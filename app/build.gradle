plugins {
    id "com.android.application"
    id "kotlin-android"
}

repositories {
    maven {
        url("https://oss.sonatype.org/content/repositories/snapshots")
    }
    maven {
        url "https://jitpack.io"
    }
    mavenCentral()
}

android {
    compileSdk 34
    defaultConfig {
        applicationId "com.example.android.androidskeletonapp"
        minSdkVersion 21
        //noinspection OldTargetApi
        targetSdkVersion 33
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.ext.junit.runners.AndroidJUnit4"
        vectorDrawables.useSupportLibrary = true
        multiDexEnabled true
    }

    buildFeatures {
        compose = true
        dataBinding = true
        viewBinding = true
        buildConfig = true
    }

    composeOptions {
        kotlinCompilerExtensionVersion = libs.versions.kotlinCompilerExtensionVersion.get()
    }

    configurations.all*.exclude module: 'jsr305'

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        coreLibraryDesugaringEnabled = true
        sourceCompatibility = JavaVersion.VERSION_17
        targetCompatibility = JavaVersion.VERSION_17
    }

    dataBinding {
        enabled = true
    }
    namespace 'com.example.android.androidskeletonapp'

    configurations.all {
        resolutionStrategy {
            force 'junit:junit:4.12','com.squareup.okhttp3:okhttp:4.10.0'
        }
    }
}


dependencies {

    implementation (libs.android.core) {
        exclude group: 'com.facebook.flipper'
    }

    implementation(libs.dhis2.mobile.designsystem)
    implementation(libs.dhis2.mobile.datentry) {
        exclude group: 'org.hisp.dhis.rules'
        exclude group: 'org.hisp.dhis.lib.expression'
        exclude group: 'org.hisp.dhis.android-core'
    }
    implementation(libs.dhis2.mobile.rules)
//    implementation libs.rule.engine

    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation libs.appcompat
    implementation libs.material
    implementation libs.annotation
    implementation libs.constraintlayout
    implementation libs.lifecycle.extensions
    implementation libs.multidex
    implementation libs.legacy.support.v4
    implementation libs.commons.jexl
    implementation(libs.androidx.material3)
    implementation(libs.androidx.core.splashscreen)

    api(libs.androidx.compose.livedata)
    debugApi(libs.androidx.compose.uitooling)
    api(libs.androidx.compose)
    api(libs.androidx.compose.constraintlayout)
    api(libs.androidx.compose.preview)
    api(libs.androidx.compose.ui)
    api(libs.androidx.compose.livedata)
    testImplementation libs.junit
    androidTestImplementation libs.runner
    androidTestImplementation libs.espresso.core

    debugImplementation libs.flipper.module
    debugImplementation libs.soloader
    debugImplementation (libs.flipper.network) {
        exclude group: 'com.squareup.okhttp3'
    }
    coreLibraryDesugaring(libs.desugar)


    releaseImplementation libs.flipper.module
}
